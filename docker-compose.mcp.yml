version: '3.8'

services:
  # GitLab MCP Server
  gitlab-mcp:
    image: ghcr.io/nguyenvanduocit/gitlab-mcp:latest
    container_name: gitlab-mcp
    ports:
      - "3001:3000"
    environment:
      - GITLAB_TOKEN=${GITLAB_TOKEN}
      - GITLAB_URL=${GITLAB_URL}
    restart: unless-stopped
    networks:
      - mcp-network

  # Atlassian MCP Server (объединенный для Jira, Confluence)
  atlassian-mcp:
    image: atlassian-mcp-server:latest
    container_name: atlassian-mcp
    ports:
      - "3002:3000"
    environment:
        - JIRA_API_TOKEN=${JIRA_API_TOKEN}
        - JIRA_PERSONAL_TOKEN=${JIRA_PERSONAL_TOKEN}
        - JIRA_USERNAME=${JIRA_USERNAME}
        - JIRA_URL=${JIRA_URL}
        - CONFLUENCE_API_TOKEN=${CONFLUENCE_API_TOKEN}
        - CONFLUENCE_USERNAME=${CONFLUENCE_USERNAME}
        - CONFLUENCE_URL=${CONFLUENCE_URL}
        - CONFLUENCE_PERSONAL_TOKEN=${CONFLUENCE_PERSONAL_TOKEN}
    restart: unless-stopped
    networks:
      - mcp-network

  # Active Directory MCP Server
  activedirectory-mcp:
    image: activedirectory-mcp-server:latest
    container_name: activedirectory-mcp
    ports:
      - "3003:3000"
    environment:
      - AD_DOMAIN=${AD_DOMAIN}
      - AD_USERNAME=${AD_USERNAME}
      - AD_PASSWORD=${AD_PASSWORD}
    restart: unless-stopped
    networks:
      - mcp-network

networks:
  mcp-network:
    driver: bridge
